<html>
	<head>
		<style>
			#myCanvas{
				margin:0 auto;
				display:block;
				position:absolute;
			}
			#form{
				position: absolute;
			}
			.student{
				background:gray;
				display:block;
				position:absolute;
				width:80px;
				height:40px;
				z-index:10;
			}
			.absent{
				background:blue;
			}
			.late{
				background: pink;
			}
		</style>
	</head>
	<body>
		<header>
		</header>
		
		<div id="main">
			<h1 id ="classCode"></h1>
			<canvas id="myCanvas" width="1000" height="600" style="border:1px solid #000000;">
			</canvas>
		</div>
		
		<footer>
		</footer>
		
	</body>
	<script type="text/javascript" src="scripts/checkAttendance.js"></script>
	<script>
		var students = [new Student(1, "someone", 
			"just", "enrolled", "7400", "belthazod"), 

						new Student(2, "someone", 
			"just", "enrolled", "7400", "belthazod"),

						new Student(3, "someone", 
			"just", "enrolled", "7400", "belthazod")];

		var x = new universityClass(7006, "s421", "8:30-9:30", 50, "belthazod", students);
		
		localStorage.setItem("students", JSON.stringify(x));
		var p = JSON.parse(localStorage.getItem('students'));
		alert(p.classcode);
		document.getElementById('classCode').innerHTML = p.classcode;
		
		var c = document.getElementById("myCanvas");
		var ctx = c.getContext("2d");
		var seats = 0;
		var y = 15;
		var row = 1;
		var main = document.getElementById('main');
		var seatCount = 0;
		for(var x = 15 ; row<6; x+=90){
			if(seats > 4){
				y+= 80;
				seats = 0;
				x = 15;
				row++;
			}
			if (row<6){
				seatCount++;
				var div = document.createElement("div");
				div.setAttribute("style", "margin-top:" + y + ";margin-left:" + x);
				div.className="student";
				div.setAttribute("onclick", "changeState("+seatCount+")");
				div.setAttribute("draggable", "true");
				main.appendChild(div);
			
				ctx.fillStyle = "#FF0000";
				ctx.fillRect(x, y, 80, 40);
				seats++;
			}
		}
		var seats = 0;
		var row = 1;
		var y = 15;
		
		for(var x = 910 ; row<6; x-=90){
			if(seats > 4){
				y += 80;
				seats = 0;
				x = 910;
				row++;
			}
			if (row<6){
				seatCount++;
				var div = document.createElement("div");
				div.setAttribute("style", "margin-top:" + y + ";margin-left:" + x);
				div.className="student";
				div.setAttribute("onclick", "changeState("+seatCount+")");
				main.appendChild(div);
				
				ctx.fillStyle = "#FF0000";
				ctx.fillRect(x, y, 80, 40);
				seats++;
			}
		}
		
		function changeState(index){
			var main = document.getElementById('main');
			var selectedStudent = main.getElementsByClassName('student')[index-1];
			if(selectedStudent.className == "student"){
				selectedStudent.className = "student absent";
			}else if(selectedStudent.className == "student absent"){
				selectedStudent.className = "student late";
			}else{
				selectedStudent.className = "student";
			}
		}
		
	</script>
	
</html>
